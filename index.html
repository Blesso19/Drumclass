<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notation Maker PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#050814;
  --panel:rgba(22,30,60,0.85);
  --glass:rgba(255,255,255,0.08);
  --accent:#7df9ff;
  --accent2:#9b5cff;
  --danger:#ff5c6c;
  --text:#ffffff;
  --muted:#9ba4d6;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:radial-gradient(circle at top,#0b1440,#050814);
  color:var(--text);
  font-family:system-ui,-apple-system;
}

header{
  padding:14px;
  text-align:center;
  font-size:22px;
  font-weight:700;
  background:linear-gradient(90deg,var(--accent2),var(--accent));
  -webkit-background-clip:text;
  color:transparent;
}

.app{
  max-width:1200px;
  margin:auto;
  padding:10px;
}

/* PALETTE */
.palette{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(52px,1fr));
  gap:10px;
  padding:14px;
  background:var(--panel);
  border-radius:18px;
  backdrop-filter:blur(12px);
}

.sym, .control{
  background:var(--glass);
  border:1px solid rgba(255,255,255,.15);
  border-radius:14px;
  padding:10px;
  font-size:18px;
  color:var(--text);
  cursor:pointer;
  transition:.2s;
}

.sym:hover, .control:hover{
  transform:scale(1.12);
  box-shadow:0 0 14px var(--accent);
}

.sym.active{
  background:linear-gradient(135deg,var(--accent2),var(--accent));
  color:#000;
  font-weight:700;
}

.control.delete-all{
  background:var(--danger);
  font-weight:700;
}

/* CANVAS */
.canvas-wrap{
  margin-top:16px;
  background:var(--panel);
  border-radius:20px;
  padding:14px;
}

canvas{
  width:100%;
  background:#070d2a;
  border-radius:16px;
}

/* FOOTER */
.footer{
  text-align:center;
  font-size:13px;
  color:var(--muted);
  padding:10px;
}
</style>
</head>
<body>

<header>üéº Notation Maker PRO</header>

<div class="app">

<div class="palette">
  <!-- NOTES -->
  <button class="sym" data-s="‚óè">‚óè</button>
  <button class="sym" data-s="‚ó¶">‚ó¶</button>
  <button class="sym" data-s="√ó">√ó</button>
  <button class="sym" data-s="ùÖü">ùÖü</button>
  <button class="sym" data-s="ùÖû">ùÖû</button>
  <button class="sym" data-s="ùÖù">ùÖù</button>

  <!-- RESTS -->
  <button class="sym" data-s="ùÑΩ">ùÑΩ</button>
  <button class="sym" data-s="ùÑæ">ùÑæ</button>

  <!-- DYNAMICS -->
  <button class="sym" data-s="p">p</button>
  <button class="sym" data-s="mf">mf</button>
  <button class="sym" data-s="f">f</button>

  <!-- TEXT -->
  <button class="sym" data-s="rit.">rit.</button>

  <!-- CONTROL -->
  <button class="control delete-all" id="clearAll">üóë Clear</button>
</div>

<div class="canvas-wrap">
  <canvas id="staff" width="1200" height="480"></canvas>
</div>

</div>

<div class="footer">
Click symbol ‚Üí tap line OR space to add ‚Ä¢ Tap note to delete ‚Ä¢ Clear removes all
</div>

<script>
const canvas=document.getElementById("staff");
const ctx=canvas.getContext("2d");

const state={
  active:"‚óè",
  notes:[]
};

/* STAFF SETTINGS (BIGGER & CLEAR) */
const staffTop=140;
const lineGap=34;            // BIGGER gap
const totalPositions = 9;    // 5 lines + 4 spaces
const left=70;
const right=1130;
const hitRadius=16;

/* SYMBOL SELECT */
document.querySelectorAll(".sym").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll(".sym").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    state.active=btn.dataset.s;
  };
});
document.querySelector(".sym").classList.add("active");

/* CLEAR ALL */
document.getElementById("clearAll").onclick=()=>{
  if(confirm("Delete all notation?")){
    state.notes=[];
    draw();
  }
};

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* STAFF */
  ctx.strokeStyle="#b5c7ff";
  ctx.lineWidth=2;

  for(let i=0;i<5;i++){
    const y=staffTop+i*lineGap;
    ctx.beginPath();
    ctx.moveTo(left,y);
    ctx.lineTo(right,y);
    ctx.stroke();
  }

  /* NOTES */
  ctx.fillStyle="#fff";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.font="26px serif";

  state.notes.forEach(n=>{
    ctx.fillText(n.s,n.x,n.y);
  });
}

/* NOTE HIT TEST */
function hitTest(x,y){
  return state.notes.findIndex(n =>
    Math.hypot(n.x-x,n.y-y) < hitRadius
  );
}

/* POINTER */
canvas.addEventListener("pointerdown",e=>{
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  let y=(e.clientY-r.top)*(canvas.height/r.height);

  // Delete if clicked
  const hit=hitTest(x,y);
  if(hit!==-1){
    state.notes.splice(hit,1);
    draw();
    return;
  }

  /* SNAP TO LINE OR SPACE */
  const unit=lineGap/2;
  let idx=Math.round((y-staffTop)/unit);
  idx=Math.max(0, Math.min(totalPositions-1, idx));
  y=staffTop+idx*unit;

  state.notes.push({
    x,y,
    s:state.active
  });
  draw();
});

draw();
</script>

</body>
</html>
