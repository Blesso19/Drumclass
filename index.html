<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notation Maker PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#050814;
  --panel:rgba(22,30,60,0.88);
  --glass:rgba(255,255,255,0.08);
  --accent:#7df9ff;
  --accent2:#9b5cff;
  --danger:#ff5c6c;
  --text:#ffffff;
  --muted:#9ba4d6;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:radial-gradient(circle at top,#0b1440,#050814);
  color:var(--text);
  font-family:system-ui,-apple-system;
}

header{
  padding:14px;
  text-align:center;
  font-size:22px;
  font-weight:700;
  background:linear-gradient(90deg,var(--accent2),var(--accent));
  -webkit-background-clip:text;
  color:transparent;
}

/* LAYOUT */
.app{
  max-width:1200px;
  margin:auto;
  padding:10px;
}

/* SYMBOL PALETTE */
.palette{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(54px,1fr));
  gap:10px;
  padding:14px;
  background:var(--panel);
  border-radius:18px;
  backdrop-filter:blur(12px);
}

.sym, .control{
  background:var(--glass);
  border:1px solid rgba(255,255,255,.15);
  border-radius:14px;
  padding:10px;
  font-size:20px;
  color:var(--text);
  cursor:pointer;
  transition:.2s;
}

.sym:hover{
  transform:scale(1.15);
  box-shadow:0 0 14px var(--accent);
}

.sym.active{
  background:linear-gradient(135deg,var(--accent2),var(--accent));
  color:#000;
  font-weight:700;
}

.control.delete-all{
  background:var(--danger);
  font-weight:700;
}

/* CANVAS */
.canvas-wrap{
  margin-top:16px;
  background:var(--panel);
  border-radius:20px;
  padding:14px;
}

canvas{
  width:100%;
  background:#070d2a;
  border-radius:16px;
}

/* FOOTER */
.footer{
  text-align:center;
  font-size:50px;
  color:var(--muted);
  padding:10px;
}
</style>
</head>

<body>

<header>üéº Notation Maker PRO</header>

<div class="app">

<div class="palette">
  <button class="sym" data-s="‚óè">‚óè</button>
  <button class="sym" data-s="‚ó¶">‚ó¶</button>
  <button class="sym" data-s="√ó">√ó</button>
  <button class="sym" data-s="ùÖü">ùÖü</button>
  <button class="sym" data-s="ùÖû">ùÖû</button>
  <button class="sym" data-s="ùÖù">ùÖù</button>
  <button class="sym" data-s="ùÑΩ">ùÑΩ</button>
  <button class="sym" data-s="p">p</button>
  <button class="sym" data-s="mf">mf</button>
  <button class="sym" data-s="f">f</button>
  <button class="control delete-all" id="clearAll">üóë Clear</button>
</div>

<div class="canvas-wrap">
  <canvas id="staff" width="1200" height="520"></canvas>
</div>

</div>

<div class="footer">
Click to add notes (lines, spaces, above & below) ‚Ä¢ Click note to delete
</div>

<script>
const canvas=document.getElementById("staff");
const ctx=canvas.getContext("2d");

const state={
  active:"‚óè",
  notes:[]
};

/* STAFF CONFIG */
const staffTop=200;
const lineGap=34;
const lines=5;
const extraPositions=4; // above & below
const totalPositions=(lines*2-1)+(extraPositions*2);
const left=80;
const right=1120;
const hitRadius=20;

/* SELECT SYMBOL */
document.querySelectorAll(".sym").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll(".sym").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    state.active=btn.dataset.s;
  };
});
document.querySelector(".sym").classList.add("active");

/* CLEAR */
document.getElementById("clearAll").onclick=()=>{
  if(confirm("Delete all notes?")){
    state.notes=[];
    draw();
  }
};

/* DRAW */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* STAFF */
  ctx.strokeStyle="#b8c9ff";
  ctx.lineWidth=2;
  for(let i=0;i<lines;i++){
    const y=staffTop+i*lineGap;
    ctx.beginPath();
    ctx.moveTo(left,y);
    ctx.lineTo(right,y);
    ctx.stroke();
  }

  /* NOTES + LEDGER */
  state.notes.forEach(n=>{
    drawLedger(n);
    ctx.fillStyle="#fff";
    ctx.font="52px serif"; // BIG NOTES
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText(n.s,n.x,n.y);
  });
}

/* LEDGER LINES */
function drawLedger(note){
  const topY=staffTop;
  const bottomY=staffTop+lineGap*(lines-1);

  ctx.strokeStyle="#b8c9ff";
  ctx.lineWidth=2;

  if(note.y < topY){
    for(let y=topY-lineGap;y>=note.y;y-=lineGap){
      ctx.beginPath();
      ctx.moveTo(note.x-20,y);
      ctx.lineTo(note.x+20,y);
      ctx.stroke();
    }
  }

  if(note.y > bottomY){
    for(let y=bottomY+lineGap;y<=note.y;y+=lineGap){
      ctx.beginPath();
      ctx.moveTo(note.x-20,y);
      ctx.lineTo(note.x+20,y);
      ctx.stroke();
    }
  }
}

/* HIT TEST */
function hitTest(x,y){
  return state.notes.findIndex(n =>
    Math.hypot(n.x-x,n.y-y)<hitRadius
  );
}

/* POINTER */
canvas.addEventListener("pointerdown",e=>{
  const r=canvas.getBoundingClientRect();
  const x=(e.clientX-r.left)*(canvas.width/r.width);
  let y=(e.clientY-r.top)*(canvas.height/r.height);

  const hit=hitTest(x,y);
  if(hit!==-1){
    state.notes.splice(hit,1);
    draw();
    return;
  }

  const unit=lineGap/2;
  const minY=staffTop-extraPositions*lineGap;
  const maxY=staffTop+(lines-1+extraPositions)*lineGap;

  let idx=Math.round((y-minY)/unit);
  idx=Math.max(0,Math.min(totalPositions-1,idx));
  y=minY+idx*unit;

  state.notes.push({x,y,s:state.active});
  draw();
});

draw();
</script>

</body>
</html>
